# 파이썬 정형 데이터 분석 및 시각화

## 1 . 서울시 범죄현황 통계자료 분석 및 시각화

> 1. 관서별 5대 범죄 발생 및 검거 파일을 활용해, 각 구의 경찰서마다의 검거율을 계산함
>
> 2. 데이터 분석을 바탕으로 수치 시각화를 진행 + 구글 지도를 활용한 시각화



### 1.1 데이터 입력 및 데이터 전처리

- import

  ```python
  import numpy as np
  import pandas as pd
  import seaborn as sns
  
  import matplotlib.pyplot as plt
  from matplotlib import font_manager, rc
  ```

- 엑셀 파일 읽기

  ```python
  df = pd.read_excel('관서별 5대범죄 발생 및 검거.xlsx', encoding='utf-8')
  ```

- 경찰서를 구별로 정리

  관서명을 기준으로 어느 구인지 '구별'열 추가

  ```python
  police_to_gu = {'서대문서': '서대문구', '수서서': '강남구', '강서서': '강서구', '서초서': '서초구',
                  '서부서': '은평구', '중부서': '중구', '종로서': '종로구', '남대문서': '중구',
                  '혜화서': '종로구', '용산서': '용산구', '성북서': '성북구', '동대문서': '동대문구',
                  '마포서': '마포구', '영등포서': '영등포구', '성동서': '성동구', '동작서': '동작구',
                  '광진서': '광진구', '강북서': '강북구', '금천서': '금천구', '중랑서': '중랑구',
                  '강남서': '강남구', '관악서': '관악구', '강동서': '강동구', '종암서': '성북구', 
                  '구로서': '구로구', '양천서': '양천구', '송파서': '송파구', '노원서': '노원구', 
                  '방배서': '서초구', '은평서': '은평구', '도봉서': '도봉구'}
  
  df['구별'] = df['관서명'].apply(lambda x: police_to_go.get(x, '구 없음'))
  ```

- 관서별 데이터를 구별 데이터로 정리

  한 구에 있는 여러 경찰서의 범죄 발생율과 검거율을 구를 기준으로 합침

  구가 없는 행은 삭제 진행

  ```python
  gu_df = pd.pivot_table(df, index='구별', aggfunc=np.sum)
  gu_df = gu_df.drop(['구 없음'])
  ```



 ### 1.2 범죄별로 검거율 계산하기

- 발생건수 대비 검거건수를 '검거율'이라는 새 열에 삽입 

  삽입 후 필요없어진 열 제거

  ```python
  gu_df['강도검거율'] = gu_df['강도(검거)']/gu_df['강도(발생)']*100
  #강간, 살인,절도, 폭력, 검거율 동일
  
  del gu_df['강간(검거)']
  #검거열 다 제거
  ```

- 검거율이 100보다 큰 경우, 100으로 맞춰주기

  ```
  columns = ['강간검거율', '강도검거율', '살인검거율', '절도검거율', '폭력검거율']
  gu_df_rate = gu_df[columns]
  
  for row_index, row in gu_df_rate.iterrows():
  	for column in columns:
  		if row[column] > 100:
  			gu_df.at[row_index, column] = 100
  ```

  

